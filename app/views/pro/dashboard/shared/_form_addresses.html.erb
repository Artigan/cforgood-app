<div class="address-overlay hidden">
  <div class="address-container">
    <!-- CLOSE BUTTON -->
    <button type="button" class="close-button"><i class="fa fa-times"></i></button>
    <!-- DAY CARROUSEL -->
    <div class="days-carrousel">
      <% I18n.t(:"date.day_names").each do |day| %>
        <div class="title-address">
          <span class="day"><%= day %></span>
          <div class="form-address" id="<%= day %>">
            <!-- CREATE ADDRESS -->
            <% if current_business.addresses.find_by_day(day) %>
              <%= render(partial: 'pro/addresses/form/edit', locals: { day: day, address: current_business.addresses.find_by_day(day) })  %>
            <% else %>
              <%= render(partial: 'pro/addresses/form/create', locals: { day: day, address: Address.new }) %>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>

<%= render 'pro/dashboard/shared/updated' %>

<% content_for :after_js do %>
  <script>
    $(document).ready(function() {

      // DESACTIVATE FIELDS IF ADDRESS NOT ACTIVE
      if ($('#address_active') === false) {
          $('#address_street').attr('disabled', false);
      }

      // CLOSE ADDRESS OVERLAY
      $('.close-button').click(function() {
        $('.address-overlay').addClass('hidden');
      });

      // CONTROL REQUIRED FIELDS
      $(".form-address").on("change", function(e) {
        e.preventDefault();
        var dayName = $(this).attr('id');
        if ($('#'+dayName).find('#address_street').val() != "" &&
            $('#'+dayName).find('#address_zipcode').val() != "" &&
            $('#'+dayName).find('#address_city').val() != "" ) {
          $('#'+dayName).find('.btn').attr('disabled', false);
        } else {
        $('#'+dayName).find('.btn').attr('disabled', true);
        }
      });

    });
  </script>
<% end %>
