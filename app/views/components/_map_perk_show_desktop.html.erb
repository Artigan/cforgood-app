<script>

  var geoJson = <%= raw(@geojson.to_json) %>;

  var coordinates = geoJson.features[0].geometry.coordinates;

  mapboxgl.accessToken = 'pk.eyJ1IjoiZnJlZHBldHJpcyIsImEiOiJjaWtoem9qd2IwMDJmdnBtNmZ0Y29zcG5sIn0.atyCUDfyMaoUauNY1diwtQ';
  var map_desktop = new mapboxgl.Map({
    container: 'map-perk-desktop',
    style: 'mapbox://styles/fredpetris/cikporvjj00p8b5lwovwd3kq9',
    center: coordinates,
    interactive: false,
    zoom: 15
  });

  map_desktop.on('style.load', function () {
    map_desktop.addSource("markers", {
      "type": "geojson",
      "data": geoJson
    });

    map_desktop.addLayer({
      "id": "markers",
      "type": "symbol",
      "source": "markers",
      "interactive": true,
      "layout": {
        "icon-image": "{marker-symbol}",
        "icon-offset": [5,-20]
      }
    });
  });

</script>

