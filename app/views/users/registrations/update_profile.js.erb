$(".alert").remove();

if (<%= !current_user.errors.any? %>) {

  if (<%= request.env["HTTP_REFERER"].include?("signup") %>) {
    $(".signup-plan").addClass("ishidden");
    $(".signup-payment").addClass("slideup");
    $("#signup-breadcrumb").addClass("slide-3");

  } else {

    // DISCLAIMER - DISPLAYED
    $(".done-overlay").removeClass("hidden");

    window.setTimeout(function(){
      // DISCLAIMER - HIDDEN
      $(".done-overlay").addClass("hidden");
      // window.location.href = "<%#= pro_business_dashboard_path(current_business) %>";
    }, 3000);
  }

} else {

  if (<%= request.env["HTTP_REFERER"].include?("signup") %>) {
    $(document).find(".signup-plan").prepend('<%= j render("components/error_messages", resource: current_user, formats: [:html]) %>');
  } else {
    $(document).find("form").prepend('<%= j render("components/error_messages", resource: current_user, formats: [:html]) %>');
  }
}
