$(".alert").remove();

if (<%= !current_user.errors.any? %>) {
  if (<%= !current_user.card_id.present? %>) {
    $("#payment").removeClass('hidden');
    $("#menu a.show-payment").tab('show');
  } else {
    // DISCLAIMER - DISPLAYED
    $(".done-overlay").removeClass("hidden");
    $('.show-payment.btn').removeClass("disabled");

    if (<%= current_user.member %>) {
      $(".stop-subscription").removeClass("disabled");
    }

    if (<%= current_user.code_partner.present? %>) {
      $("#user_code_partner").attr("disabled", "disabled");
      $("input.btn-subscription").attr('value', "M'abonner");
    } else {
      $("#user_code_partner").val("").removeAttr('disabled');
      $("input.btn-subscription").val("Sauvegarder");
    }

    window.setTimeout(function(){
      // DISCLAIMER - HIDDEN
      $(".done-overlay").addClass("hidden");
    }, 3000);
  }

} else {

  $(document).find("form").prepend('<%= j render("components/error_messages", resource: current_user, formats: [:html]) %>');

}
